{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\n\nexport const config = {\n  matcher: [\"/((?!_next/|favicon.ico|robots.txt|sitemap.xml).*)\"],\n};\n\nfunction parsePairs(env: string | undefined) {\n  return (env || \"\")\n    .split(\",\")\n    .map(s => s.trim())\n    .filter(Boolean); // [\"me:myPass\",\"visitor:theirPass\"]\n}\n\nexport function middleware(req: Request) {\n  // New: multiple acceptable pairs via BASIC_AUTH_PAIRS, fallback to single user/pass\n  const pairs = parsePairs(process.env.BASIC_AUTH_PAIRS).length\n    ? parsePairs(process.env.BASIC_AUTH_PAIRS)\n    : [`${process.env.BASIC_AUTH_USER || \"\"}:${process.env.BASIC_AUTH_PASS || \"\"}`];\n\n  const auth = req.headers.get(\"authorization\") || \"\";\n  if (auth.startsWith(\"Basic \")) {\n    const decoded = Buffer.from(auth.slice(6), \"base64\").toString(\"utf8\"); // \"user:pass\"\n    if (pairs.includes(decoded)) {\n      return NextResponse.next();\n    }\n  }\n\n  return new NextResponse(\"Auth required\", {\n    status: 401,\n    headers: { \"WWW-Authenticate\": 'Basic realm=\"Gallery\"' },\n  });\n}\n"],"names":[],"mappings":";;;;;;AAqBoB;AArBpB;AAAA;;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAqD;AACjE;AAEA,SAAS,WAAW,GAAuB;IACzC,OAAO,CAAC,OAAO,EAAE,EACd,KAAK,CAAC,KACN,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,IACf,MAAM,CAAC,UAAU,oCAAoC;AAC1D;AAEO,SAAS,WAAW,GAAY;IACrC,oFAAoF;IACpF,MAAM,QAAQ,WAAW,QAAQ,GAAG,CAAC,gBAAgB,EAAE,MAAM,GACzD,WAAW,QAAQ,GAAG,CAAC,gBAAgB,IACvC;QAAC,GAAG,QAAQ,GAAG,CAAC,eAAe,IAAI,GAAG,CAAC,EAAE,QAAQ,GAAG,CAAC,eAAe,IAAI,IAAI;KAAC;IAEjF,MAAM,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,oBAAoB;IACjD,IAAI,KAAK,UAAU,CAAC,WAAW;QAC7B,MAAM,UAAU,+HAAM,CAAC,IAAI,CAAC,KAAK,KAAK,CAAC,IAAI,UAAU,QAAQ,CAAC,SAAS,cAAc;QACrF,IAAI,MAAM,QAAQ,CAAC,UAAU;YAC3B,OAAO,gMAAY,CAAC,IAAI;QAC1B;IACF;IAEA,OAAO,IAAI,gMAAY,CAAC,iBAAiB;QACvC,QAAQ;QACR,SAAS;YAAE,oBAAoB;QAAwB;IACzD;AACF"}}]
}